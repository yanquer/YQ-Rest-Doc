==========================
pkill
==========================

类似的指令:

- :doc:`/docs/操作系统/linux/linux指令/killall`
- :doc:`/docs/操作系统/linux/linux指令/kill`

当作于管理进程时，pkill 命令和 killall 命令的用法相同，
都是通过进程名杀死一类进程，该命令的基本格式如下::

  [root@localhost ~]# pkill [信号] 进程名

.. note::

  即使进程是以绝对/相对路径启动, 进程名也是直接写最终启动的那个文件名即可,
  如使用 `/usr/bin/top` 启动了个 `top`,
  使用 `pkill -9 top` 杀死

pkill 命令常用信号及其含义

+----------+---------+----------------------------+
| 信号编号 | 信号名  | 含义                       |
+==========+=========+============================+
| 0        | EXIT    | 程序退出时收到该信息       |
+----------+---------+----------------------------+
| 1        | HUP     | 挂掉电话线或终端连接的     |
|          |         | 挂起信号，这个信号也会     |
|          |         | 造成某些进程在没有终止     |
|          |         | 的情况下重新初始化         |
+----------+---------+----------------------------+
| 2        | INT     | 表示结束进程，但并不是     |
|          |         | 强制性的，常用的 "Ctrl+C"  |
|          |         | 组合键发出                 |
|          |         | 就是一个 kill -2 的信号    |
+----------+---------+----------------------------+
| 3        | QUIT    | 退出。                     |
+----------+---------+----------------------------+
| 9        | KILL    | 杀死进程，即强制结束进程   |
+----------+---------+----------------------------+
| 11       | SEGV    | 段错误                     |
+----------+---------+----------------------------+
| 15       | TERM    | 正常结束进程               |
|          |         | 是 kill 命令的默认信号     |
+----------+---------+----------------------------+

还可以踢出登陆用户

除此之外，pkill 还有一个更重要的功能，即按照终端号来踢出用户登录，
此时的 pkill 命令的基本格式如下::

  pkill [-t 终端号] 进程名

`[-t 终端号] 选项用于按照终端号踢出用户`

学习 killall 命令时，不知道大家发现没有，通过 killall 命令杀死 sshd 进程的方式来踢出用户，
非常容易误杀死进程，要么会把 sshd 服务杀死，要么会把自己的登录终端杀死

所以，不管是使用 kill 命令按照 PID 杀死登录进程，还是使用 killall 命令按照进程名杀死登录进程，
都是非常容易误杀死进程的，而使用 pkill 命令则不会，举个例子,

使用w命令查询本机已经登录的用户::

  [root@localhost ~]# w
  20:06:34 up 28 min, 3 users, load average: 0.00, 0.00, 0.00
  USER  TTY           FROM LOGIN@  IDLE  JCPU  PCPU WHAT
  root ttyl              -  19:47 18:52 0.01s 0.01s -bash
  root pts/0 192.168.0.100  19:47 0.00s 0.09s 0.04s w
  root pts/1 192.168.0.100  19:51 14:56 0.02s 0.02s -bash

可以看出当前主机已经登录了三个root用户，一个是本地终端ttyl登录，
另外两个是从192.168.0.100登陆的远程登录

强制杀死从pts/1虚拟终端登陆的进程::

  [root@localhost ~]# pkill -9 -t pts/1
  [root@localhost ~]# w
  20:09:09 up 30 min, 2 users, load average: 0.00, 0.00,0.00
  USER   TTY          FROM LOGIN@  IDLE  JCPU  PCPU WHAT
  root  ttyl             -  19:47 21:27 0.01s 0.01s -bash
  root pts/0 192.168.0.100  19:47 0.00s 0.06s 0.00s w

虚拟终端pts/1的登录进程已经被杀死了


